function Swipe(E,w){var M=function(){};var k=function(N){setTimeout(N||M,0);};var i={addEventListener:!!window.addEventListener,touch:("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,transitions:(function(N){var P=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var O in P){if(N.style[P[O]]!==undefined){return true;}}return false;})(document.createElement("swipe"))};if(!E){return;}var r=E.children[0],l=r.children,u=l.length;var C=parseInt(w.startSlide,10)||0,I=w.speed||300,H=w.continuous,v=w.vertical||false;if(H){var z=r.innerHTML;if(u==2){r.innerHTML=z+z;}else{if(u==1){r.innerHTML=z+z+z;}}}var j=C-1,p=C+1,c,K,J,a,e;var m=v?"height":"width",G=v?"top":"left",A=v?"y":"x";function n(){K=new Array(l.length);E.style.overflow="hidden";J=E.getBoundingClientRect()[m]||(v?E.offsetHeight:E.offsetWidth);r.style[m]=(l.length*J)+"px";var Q=l.length;while(Q--){var N=l[Q];N.style[m]=J+"px";N.style.display="inline";N.style.cssFloat="left";N.style.position="relative";N.style[G]=(Q*-J)+"px";if(u>2){N.setAttribute("data-index",Q);}else{if(u==2){N.setAttribute("data-index",Q%2);}else{if(u==1){N.setAttribute("data-index",0);}}}if(i.transitions){var P=C>Q?-J:(C<Q)?J:0;if(H){if(C==l.length-1&&Q==0){P=J;p=0;}if(!C&&Q==l.length-1){P=-J;j=Q;}}if(Q!=C){s(Q,P,0);}else{K[C]=0;}}}if(!i.transitions){r.style[G]=(C*-J)+"px";}var O=l[C].getAttribute("data-index");k(w.callback&&w.callback(O,l[C]));k(w.transitionStart&&w.transitionStart(O,l[C]));E.style.visibility="visible";}function o(){var O=l.length;while(O--){if(i.transitions){var N=C>O?-J:(C<O)?J:0;if(H){if(C==l.length-1&&O==0){N=J;p=0;}if(!C&&O==l.length-1){N=-J;j=O;}}s(O,N,0);}}}function B(){if(C){b(j,I,-1);}else{if(H){b(j,I,-1);}}}function h(){if(C<l.length-1){b(p,I,1);}else{if(H){b(p,I,1);}}}function b(Q,N,O){if(C==Q||Q<0||Q>l.length-1){return;}if(!c){var P=l[Q].getAttribute("data-index");k(w.transitionStart&&w.transitionStart(P,l[Q]));}if(i.transitions){if(!O){O=-Math.abs(C-Q)/(C-Q);}if(O>0){s(j,-J,0);s(C,K[C]-J,I);s(p,K[p]-J,I);C=p;}else{s(p,+J,0);s(C,K[C]+J,I);s(j,K[j]+J,I);C=j;}}else{L(C*-J,Q*-J,N||I);}j=Q-1;C=Q;p=Q+1;var P=l[C].getAttribute("data-index");k(w.callback&&w.callback(P,l[C]));}function s(N,P,O){g(N,P,O);K[N]=P;}function g(Q,T,S){var O=l[Q];var R=O&&O.style;if(!R){return;}var P=v?0:T,N=v?T:0;R.webkitTransitionDuration=R.MozTransitionDuration=R.msTransitionDuration=R.OTransitionDuration=R.transitionDuration=S+"ms";R.webkitTransform="translate("+P+"px,"+N+"px)translateZ(0)";R.msTransform=R.MozTransform=R.OTransform=v?"translateY("+T+"px)":"translateX("+T+"px)";}function L(R,Q,N){if(!N){r.style[G]=Q+"px";return;}var P=+new Date;var O=setInterval(function(){var S=+new Date-P;if(S>N){r.style[G]=Q+"px";if(D){q();}var T=l[C].getAttribute("data-index");w.transitionEnd&&w.transitionEnd.call(event,T,l[C]);clearInterval(O);return;}r.style[G]=(((Q-R)*(Math.floor((S/N)*100)/100))+R)+"px";},4);}var D=w.auto||0;var f;function q(){f=setTimeout(h,D);}function t(){clearTimeout(f);}var y={};var F={};var d;var x={handleEvent:function(N){switch(N.type){case"touchstart":this.start(N);break;case"touchmove":this.move(N);break;case"touchend":k(this.end(N));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":k(this.transitionEnd(N));break;case"resize":k(n.call());break;}if(w.stopPropagation){N.stopPropagation();}},start:function(N){o();var O=N.touches[0];y={x:O.pageX,y:O.pageY,time:+new Date};d=undefined;F={};c=false;r.addEventListener("touchmove",this,false);r.addEventListener("touchend",this,false);},move:function(N){if(N.touches.length>1||N.scale&&N.scale!==1){return;}if(w.disableScroll){N.preventDefault();}var O=N.touches[0];F={x:O.pageX-y.x,y:O.pageY-y.y};if(typeof d=="undefined"){d=!!(d||Math.abs(F[v?"y":"x"])<Math.abs(F[v?"x":"y"]));}if(!d){N.preventDefault();t();if(!H){F[A]=F[A]/((!C&&F[A]>0||C==l.length-1&&F[A]<0)?(Math.abs(F[A])/J+1):1);}g(j,F[A]+K[j],0);g(C,F[A]+K[C],0);g(p,F[A]+K[p],0);var Q=F[A]>0?j:p;if(!c&&l[Q]){var P=l[Q].getAttribute("data-index");k(w.transitionStart&&w.transitionStart(P,l[Q]));}c=true;}},end:function(Q){var T=+new Date-y.time;var P=Number(T)<250&&Math.abs(F[A])>20||Math.abs(F[A])>J/2;var S=(!C&&F[A]>0),O=(C==l.length-1&&F[A]<0);var N=H?false:S||O;var R=F[A]<0;if(!d){if(P&&!N){if(R){h();}else{B();}}else{s(j,-J,I);s(C,0,I);s(p,J,I);if(!H){if(S){k(w.pastStart&&w.pastStart(C,l[C]));}if(O){k(w.pastEnd&&w.pastEnd(C,l[C]));}}}}r.removeEventListener("touchmove",x,false);r.removeEventListener("touchend",x,false);},transitionEnd:function(O){o();var N=parseInt(O.target.getAttribute("data-index"),10);if(N==C){if(D){q();}w.transitionEnd&&w.transitionEnd.call(O,N,l[C]);}}};n();if(D){q();}if(i.addEventListener){if(i.touch){r.addEventListener("touchstart",x,false);}if(i.transitions){r.addEventListener("webkitTransitionEnd",x,false);r.addEventListener("msTransitionEnd",x,false);r.addEventListener("oTransitionEnd",x,false);r.addEventListener("otransitionend",x,false);r.addEventListener("transitionend",x,false);}window.addEventListener("resize",x,false);}else{window.onresize=function(){n();};}return{setup:function(){n();},slide:function(O,N){b(O,N);},prev:function(){t();B();},next:function(){t();h();},getPos:function(){return C;},stop:function(){t();},start:function(){q();},kill:function(){t();r.style[m]="auto";r.style[G]=0;var O=l.length;while(O--){var N=l[O];N.style[m]="100%";N.style[G]=0;if(i.transitions){g(O,0,0);}}if(i.addEventListener){r.removeEventListener("touchstart",x,false);r.removeEventListener("webkitTransitionEnd",x,false);r.removeEventListener("msTransitionEnd",x,false);r.removeEventListener("oTransitionEnd",x,false);r.removeEventListener("otransitionend",x,false);r.removeEventListener("transitionend",x,false);window.removeEventListener("resize",x,false);}else{window.onresize=null;}}};}if(window.jQuery||window.Zepto){(function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b));});};})(window.jQuery||window.Zepto);}function swipe(c,o){var n=function(){};var o=o||{},h=parseInt(o.startSlide,10)||0,d=o.speed||0,e=o.transitionStart||n,m=o.callback||n,a=o.nav||null;var g=c.children[0],b=g.children;if(a){var f=a.children;if(f.length>0){f[h].className="current";}else{var l="";k(b,function(q,p){l+="<span class="+(q==h?"current":"")+">"+(q+1)+"</span>";});a.innerHTML=l;f=a.children;}o.callback=function(p,q){f[h].className="";f[p].className="current";m(p,q);h=p;};}o.transitionStart=function(q,p){j(p);e(q,p);};var i=new Swipe(c,o);f&&k(f,function(q,p){p.addEventListener("click",function(){i.stop();i.slide(q,d);},false);});function k(q,s){for(var r=0,p=q.length;r<p;r++){s.call(this,r,q[r]);}}function j(p){var q=p.querySelectorAll("img[src2]");if(!q){return;}k(q,function(s,u){var t=u.getAttribute("src2"),r=new Image();r.onload=function(){u.style.cssText="filter:alpha(opacity=30);opacity:0.3;";u.setAttribute("src",t);u.removeAttribute("src2");setTimeout(function(){u.style.cssText="filter:alpha(opacity=100);opacity:1;-webkit-transition:250ms;-moz-transition:250ms;transition:250ms;";},5);};r.src=t;});}return i;}